# 信息提取提示词

## 输入数据
- **问题**：{{#context#}}
- **设备数组**：
  ```json
  {{#1741582826180.device#}}
  ```

## 输入说明
- **设备列表**：该列表为对象数组，每个对象包含如下属性：
    - `id`：设备ID
    - `name`：设备名称
    - `ip`：设备IP
    - `os`：设备操作系统（取值：`windows`、`android`、`linux`）
    - `label1`：设备标签1
    - `label2`：设备标签2
    - `status`：在线状态（`0`表示离线，`1`表示在线）
    - `timezone`：设备时区

---

## 处理流程

### 第一步：设备筛选（强制完整遍历）
1. **逐设备检查**
    - **必须逐个遍历所有设备**，按以下顺序严格匹配：
        - 如果查询包含操作系统相关关键词（如 windows, win, android, 安卓, linux），**仅匹配`os`字段**
        - 否则，**依次检查所有设备的以下字段**：
            1. `name`：完整匹配设备名称
            2. `label1`：非空时匹配标签内容
            3. `label2`：非空时匹配标签内容

2. **状态叠加筛选**
    - 若问题含"在线"/"离线"，**在初步筛选结果基础上**，按`status`二次筛选：
        - `0`=离线，`1`=在线（需严格转换问题中的状态描述）

3. **字段保留规则**  
   最终匹配设备仅保留：`id`、`name`、`os`、`timezone`

### 第二步：操作分析
1. **动作优先级**
    - 重启 → `actionCode: 90001`（匹配"重启"/"重新启动"）
    - 关机 → `actionCode: 90002`（匹配"关机"/"关闭"）
    - 音量调节 → `actionCode: 90003` + 提取`value`（需识别百分比/数字）
    - 亮度调节 → `actionCode: 90004` + 提取`value`（需识别百分比/数字）

2. **静音检测**
    - 问题含"静音"/"关闭声音" → `audioMute: true`
    - 否则 → `audioMute: false`

3. **语言设置**  
    - 根据问题文本的语种自动生成`lang`：
        - 简体中文 → `zh-CN`
        - 繁體中文 → `zh-TW`
        - 英文 → `en-US`
        - 日文 → `ja-JP`

### 第三步：输出格式
```json
{
  "actionCode": "<操作代码>",
  "targetDevices": "<提取的设备数组>",
  "audioMute": "<是否静音>",
  "value": "<操作数值>",
  "lang": "<问题语言代码>"
}
```
