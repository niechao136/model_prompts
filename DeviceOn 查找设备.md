# 信息提取提示词

## 输入数据
- `问题`: {{#context#}}

---

## 设备相关性判断
判断`问题`所求是否涉及设备：
- **如果`问题`所求为设备**，则设置 `assign_device = true` 并继续进行设备信息提取；
- **否则**，设置 `assign_device = false` 并跳过设备信息提取过程。

---

## 设备信息提取（仅当 assign_device 为 true 时执行）

1. **字段提取（所有字段均返回数组；若无匹配返回空数组）：**

    - **ID字段 (`id`)：**
        - 在`问题`文本中**精确匹配** `{{#17428694563420.id#}}` 内的任一元素，将所有匹配项存入 `id` 字段。

    - **名称字段 (`name`)：**
        - 在`问题`文本中**精确匹配** `{{#17428694563420.name#}}` 内的任一元素，将所有匹配项存入 `name` 字段。

    - **IP字段 (`ip`)：**
        - 在`问题`文本中**精确匹配** `{{#17428694563420.ip#}}` 内的任一元素，将所有匹配项存入 `ip` 字段。

    - **操作系统字段 (`os`)：**
        - 检查`问题`文本中是否包含下列关键词或其同义词，若匹配则将对应的操作系统存入 `os` 字段：
            - **windows**：关键词包括 `windows`、`win`、`视窗`；
            - **android**：关键词包括 `android`、`安卓`；
            - **linux**：关键词包括 `linux`、`linux系统`。
        - **示例：**
            - 如果`问题`为 `请将安卓设备静音`，则 `os` 提取为 `["android"]`；
            - 如果`问题`为 `请将win设备静音`，则 `os` 提取为 `["windows"]`。

    - **标签1字段 (`label1`)：**
        - 在`问题`文本中**精确匹配** `{{#17428694563420.label1#}}` 内的任一元素，将所有匹配项存入 `label1` 字段。

    - **标签2字段 (`label2`)：**
        - 在`问题`文本中**精确匹配** `{{#17428694563420.label2#}}` 内的任一元素，将所有匹配项存入 `label2` 字段。

2. **条件标记：**

   根据`问题`文本中的描述设置以下标记：

    - **ID标记 (`assign_id`)**:
        - 当`问题`中包含 `设备ID为...` 或 `ID为...` 等描述时，设置 `assign_id = true`；
        - **示例：**
            - 如果`问题`为 `请将C4:00:AD:DE:07:76关机` 时，`assign_id = false`；
            - 如果`问题`为 `请将ID为C4:00:AD:DE:07:76的设备关机` 时，`assign_id = true`。

    - **名称标记 (`assign_name`)**:
        - 当`问题`中包含 `设备名称为...` 或 `名为...` 等描述时，设置 `assign_name = true`；
        - **示例：**
            - 如果`问题`为 `请将PPC-300关机` 时，`assign_name = false`；
            - 如果`问题`为 `请将名为PPC-300的设备关机` 时，`assign_name = true`。

    - **IP标记 (`assign_ip`)**:
        - 当`问题`中包含 `设备IP为...`、`IP为...` 等类似描述时 → `assign_ip = true`
        - **示例：**
            - 如果`问题`为 `请将172.21.73.60关机`，则 `assign_ip = false`
            - 如果`问题`为 `请将IP为172.21.73.60的设备关机`，则 `assign_ip = true`

    - **系统标记 (`assign_os`)**:
        - 当`问题`中包含 `OS为...` 或 `系统为...` 等描述时，设置 `assign_os = true`；
        - **示例：**
            - 如果`问题`为 `请将安卓设备关机` 时，`assign_os = false`；
            - 如果`问题`为 `请将系统为安卓的设备关机` 时，`assign_os = true`。

    - **标签1标记 (`assign_label1`)**:
        - 当`问题`中包含 `标签1为...` 或 `标签为...` 等描述时，设置 `assign_label1 = true`；
        - **示例：**
            - 如果`问题`为 `请将工程设备关机` 时，`assign_label1 = false`；
            - 如果`问题`为 `请将标签为工程设备的设备关机` 时，`assign_label1 = true`。

    - **标签2标记 (`assign_label2`)**:
        - 当`问题`中包含 `标签2为...` 或 `标签为...` 等描述时，设置 `assign_label2 = true`；
        - **示例：**
            - 如果`问题`为 `请将Android设备关机` 时，`assign_label2 = false`；
            - 如果`问题`为 `请将标签为Android的设备关机` 时，`assign_label2 = true`。

    - **在线标记 (`assign_online`)**:
        - 当`问题`中包含 `在线设备` 或 `在线...` 等描述时，设置 `assign_online = true`；
        - 当`问题`中包含 `上线后执行` 等描述时，设置 `assign_online = false`；
        - **示例：**
            - 如果`问题`为 `请将安卓设备关机，设备上线后执行` 时，`assign_online = false`；
            - 如果`问题`为 `请将在线的安卓设备关机` 时，`assign_online = true`。

    - **离线标记 (`assign_offline`)**:
        - 当`问题`中包含 `离线设备` 或 `离线...` 或 `断线中...` 等描述时，设置 `assign_offline = true`；
        - **示例：**
            - 如果`问题`为 `请将离线的安卓设备关机` 时，`assign_offline = true`。

    - **异常状态标记：**
        - **assign_error**：
            - 当`问题`中提及 `异常` 但未提及下列具体异常（`硬件异常`、`软件异常`、`电池异常`、`周边设备异常`、`设备安全异常`）时，设置 `assign_error = true`；
            - 当`问题`中包含 `断线中` 等类似描述时 → `assign_error = false`
        - **assign_hardware**：当`问题`中提及 `硬件异常` 时，设置 `assign_hardware = true`；
        - **assign_software**：当`问题`中提及 `软件异常` 时，设置 `assign_software = true`；
        - **assign_battery**：当`问题`中提及 `电池异常` 时，设置 `assign_battery = true`；
        - **assign_peripheral**：当`问题`中提及 `周边外设异常` 时，设置 `assign_peripheral = true`；
        - **assign_security**：当`问题`中提及 `设备安全异常` 时，设置 `assign_security = true`。

---

## 语言设置
根据`问题`文本语言自动确定 `lang` 值：
- 简体中文 → `zh-CN`
- 繁體中文 → `zh-TW`
- 英文 → `en-US`
- 日文 → `ja-JP`

---

## 输出格式
输出 JSON 格式必须符合以下结构：
```json
{
  "assign_device": "<boolean>",
  "id": "<数组>",
  "name": "<数组>",
  "ip": "<数组>",
  "os": "<数组，windows | android | linux>",
  "label1": "<数组>",
  "label2": "<数组>",
  "assign_id": "<boolean>",
  "assign_name": "<boolean>",
  "assign_ip": "<boolean>",
  "assign_os": "<boolean>",
  "assign_label1": "<boolean>",
  "assign_label2": "<boolean>",
  "assign_online": "<boolean>",
  "assign_offline": "<boolean>",
  "assign_error": "<boolean>",
  "assign_hardware": "<boolean>",
  "assign_software": "<boolean>",
  "assign_battery": "<boolean>",
  "assign_peripheral": "<boolean>",
  "assign_security": "<boolean>",
  "lang": "<zh-CN | zh-TW | ja-JP | en-US>"
}
```

---
# 问题回答

## 步骤
1. 请识别以下文本的主要语言 `{lang}`（如 中文简体/英文/日文/韩文/中文繁体）：文本：{{#context#}}
2. 根据`history`、星期情况、天气情况和`today`综合推断回答。
3. 所有输出 **必须** 严格使用 `{lang}` 生成


## 数据
- **today**：{{#1739949978783.date#}}
- **history**：
    ```markdown
    {{#1740015105187.markdown#}}
    ```


---

# 问题提示词

**说明：**
- 请基于以下 JSON 数据进行详细分析，并在回答后续问题时严格遵循数据中的字段和结构进行解释和推理。
- **注意：回答中文问题时必须区分简体中文和繁体中文。**
- 特别注意：所有地点名称和排队单元名称必须严格保持原文，禁止任何形式的翻译或转换（如Taipei不得转换为台北、Tokyo不得转换为东京）

**JSON 数据：**
```json
{{#1740015041582.site_data#}}
```

**JSON 数据说明：**
- **顶层：** 地点数组，每个地点包含：
    - **"n"：** 地点名称  
{{#1740015041582.description#}}

**概念说明：**
- 门店视为地点。
- 排队人数越多，排队时间可能越长。
- 地点名称为专有名词，请勿翻译；请区分地点名称与排队单元名称。

**注意事项：**
- 回答前请仔细核对所有数据，确保答案基于完整数据的全面分析。
- 深入理解每个数据字段的含义及数据间关系，并据此回答所有后续问题。
- 回答内容必须与用户提问使用相同语言，确保答案清晰、精确、简洁，仅提供问题答案，无额外解释。
- 当回答中文问题时，请注意区分简体中文与繁体中文。
- 今天的日期为：{{#1739949978783.date#}}

---

以下为重新生成并优化后的提示词，请参考：

---

# 问题回答

## 输入数据
- `问题`: {{#context#}}
- `地点数组`:
    ```json
    {{#1740015041582.site_data#}}
    ```

---

## `地点数组`结构说明：
```markdown
- **顶层：** 地点数组，每个地点包含：
    - **"n"：** 地点名称  
{{#1740015041582.description#}}
```

---

## 语言提取
根据`问题`文本语言自动确定 `lang` 值，默认值为`en-US`：
- 简体中文 → `zh-CN`
- 繁體中文 → `zh-TW`
- 英文 → `en-US`
- 日文 → `ja-JP`
- 韩文 → `ko-KR`

---

## 回答问题
- 参考今天的日期为：{{#1739949978783.date#}}
- 在回答`排队`相关问题时：排队人数越多，意味着排队时间越长。
- **门店视为地点**。
- 遍历整个`地点数组`，分析`地点数组`每一项的各个属性，回答用户提出的`问题`
- 请根据`lang`，严格使用`lang`回答`问题`
- **所有出现的`地点名称`和`排队单元名称`都必须严格保持原文，严格禁止任何形式的翻译或转换**（例如：Taipei 绝对不得转换为台北，Tokyo 绝对不得转换为东京）。
- 请注意区分`地点名称`和`排队单元名称`，不要把`排队单元名称`当成`地点名称`
- 在回答诸如`哪个门店`、`哪家门店`这样的问题时，只需要回答`地点名称`即可，回答的`地点名称`必须严格保持原文，严格禁止任何形式的翻译或转换。
- 最终答案只需要输出结论即可，不需要包括过程，内容清晰、准确、简洁，**不附加额外解释**，答案中的`地点名称`必须严格保持原文，严格禁止任何形式的翻译或转换。

---

# 问题回答

## 语言提取
根据`{{#context#}}`的语言自动确定 `lang` 值，默认值为`en-US`：
- 简体中文 → `zh-CN`
- 繁體中文 → `zh-TW`
- 英文 → `en-US`
- 日文 → `ja-JP`
- 韩文 → `ko-KR`

---

## 回答问题
- 参考今天的日期为：{{#1739949978783.date#}}
- 遍历整个`历史数据`，结合`历史数据`中的星期情况、天气情况，回答问题：`{{#context#}}`
- **所有输出必须严格使用`lang`生成**
- 最终答案必须严格使用`lang`生成，只需要输出结论即可，不需要包括过程，内容清晰、准确、简洁，**不附加额外解释**。
- 所有答案输出前请检查是否符合`lang`，不符合请使用`lang`重新生成

---

## 历史数据：
```markdown
{{#1740015105187.markdown#}}
```

---
